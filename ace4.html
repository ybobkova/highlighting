<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>ACE4 in Action</title>
  <style type="text/css" media="screen">
    #editor { 
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
    }
</style>
</head>
<body>

<div id="editor">
#!tito
Spiel: Suitcase

:dinge := table(sound,oids)

:ding
koffer := []
runde := 0
wieviel := 1
richtig := 0
falsch := 0
versuche := 2
ob := 0

> [start]

Wähle von der dinge 5 zeilen zufällig aus.

nächste Runde:

  falsch := 0
    
  Wähle ein ding aus dinge zufällig aus.
  Füge ding zum koffer hinzu.
  
  Wenn wieviel == 1
    > [oneElement]
  Oder Wenn wieviel == 2
    > [twoElements]
  Oder Wenn wieviel == 3
    > [threeElements]
  Oder Wenn wieviel == 4
    > [fourElements]
  Oder Wenn wieviel == 5
    > [fiveElements]

    
  => Spiele alle Sounds des koffer ab
  ob := 0
  => packRunde
    
Spiele alle Sounds des koffer ab:
  
  für jedes element in koffer
    > :element.sound

packRunde:

  objekt := koffer[ob]
  
  Wenn auf eine oid aus objekt.oids getippt wurde
  
    Wenn ob < koffer.length-1
      > (rightSound)   
      
      ob := ob + 1
      
      => packRunde
      
    Ansonsten
      > (rightSound)
      > "Weiter gehts"
      richtig := richtig + 1
      wieviel := wieviel + 1
      
      => nächste Runde
  
  Ansonsten
    
    falsch := falsch + 1
  
    Wenn falsch < versuche
      > (wrongSound)
      > [tryAgain]
      => Spiele alle Sounds des koffer ab
      ob := 0
      => packRunde
      
    Ansonsten
      > (wrongSound)
      => Spielende
      

bei Spielende: 
  Starte Evaluation für richtig.
  
  Wenn richtig <= 4
    > [evaluationBad]
  Ansonsten
    > [evaluationGood]


=> nächste Runde
</div>

<script src="ace-0.2.0/build/src/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="ace-0.2.0/build/src/theme-vibrant_ink.js" type="text/javascript" charset="utf-8"></script>
<script src="mode-tito.js" type="text/javascript" charset="utf-8"></script>
<script src="tito_rules.js" type="text/javascript" charset="utf-8"></script>
<script>
window.onload = function() {
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/vibrant_ink");
    var JavaScriptMode = require("ace/mode/tito").Mode;
    editor.getSession().setMode(new JavaScriptMode());
};
/*    
    var Mode = function(name, desc, extensions) {
      this.name = name;
      this.desc = desc;
      this.mode = "ace/mode/"+name;
      this.extRe = new RegExp("^.*\\.tito", "gi");
    };
*/
    

</script>
</body>
</html>